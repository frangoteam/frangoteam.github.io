window.extCompressors=function(){svgEditor.addExtension("compressors",function(p){"use strict";var m,f,h=svgEditor.canvas,x="compressor",y="svg-ext-"+x,w="CPS_",_={},b={void:[{id:"v",type:"path",attr:{d:"m 10,3.3 28,8.4 m -28,26 28,-8.4 M 40,21 A 20,20 0 0 1 20,41 20,20 0 0 1 0,21 20,20 0 0 1 20,1 20,20 0 0 1 40,21 Z"}}],fan:[{id:"f",type:"path",attr:{d:"m 17.41,14.62 c 2.15,2.52 3.49,4.91 2.99,5.34 -0.24,0.21 -0.88,-0.07 -1.79,-0.78 -0.9,-0.71 -1.99,-1.79 -3.02,-3 -2.15,-2.52 -3.49,-4.91 -2.99,-5.34 0.24,-0.21 0.88,0.07 1.79,0.78 0.9,0.71 1.99,1.79 3.02,3 z m -1.83,9.27 c 1.03,-1.22 2.11,-2.3 3,-3.02 0.9,-0.72 1.54,-1 1.78,-0.79 0.25,0.2 0.08,0.88 -0.48,1.88 -0.55,1.01 -1.43,2.26 -2.46,3.48 -1.03,1.22 -2.11,2.31 -3,3.02 -0.9,0.72 -1.54,1 -1.78,0.8 -0.25,-0.21 -0.08,-0.89 0.48,-1.89 0.55,-1.01 1.43,-2.26 2.46,-3.48 z M 33,20 A 6,1.2 0 0 1 27,21.2 6,1.2 0 0 1 21,20 6,1.2 0 0 1 27,18.8 6,1.2 0 0 1 33,20 M 10.5,2.8 l 28,8.4 m -28,26 28,-8.4 M 41,20 A 20,20 0 0 1 21,40 20,20 0 0 1 1,20 20,20 0 0 1 21,0 20,20 0 0 1 41,20 Z"}}],piston:[{id:"p",type:"path",attr:{d:"m 10,2.8 28,8.4 m -28,26 28,-8.4 M 14,20 h 12 m 0,-6 V 26 M 40,20 A 20,20 0 0 1 20,40 20,20 0 0 1 0,20 20,20 0 0 1 20,0 20,20 0 0 1 40,20 Z"}}]};return{callback:function(){$("#compressor_panel").hide()},mouseDown:function(t){var e=h.getMode();if(e.substr(0,x.length)===x){var n=h.getColor("fill"),r=h.getColor("stroke"),o=h.getStrokeWidth();h.getStyle();n===r&&(n="#FFFFFF",r="#000000");var i=e.substr((x+"-").length);b[i];for(var s=t.start_x,a=t.start_y-35,l={fill:n,stroke:r,"font-size":h.getFontSize(),"font-family":h.getFontFamily(),"text-anchor":"middle","xml:space":"preserve"},d={elements:[]},g=0;g<b[i].length;g++){var c=b[i][g],v={id:c.id+h.getNextId().replace("svg_",w),"stroke-width":o};$.extend(v,c.attr),d.elements.push({type:c.type,attr:v})}var u={type:y,x:s,y:a,style:"pointer-events:none"};return $.extend(u,l),_.x=s,_.y=a,m=h.getNextId().replace("svg_",w),(f=p.addSvgGroupFromJson({group:"g",id:m,type:y,attr:u,elements:d.elements})).setAttribute("transform","translate("+s+","+a+")"),h.recalculateDimensions(f),{started:!0}}},mouseMove:function(t){},mouseUp:function(t){if(h.getMode().substr(0,x.length)===x)return{keep:t.event.clientX!=_.x&&t.event.clientY!=_.y,element:f,started:!1}},getClassId:function(){return y}}})},window.extConnector=function(){window.svgEditor&&svgEditor.addExtension("Connector",function(t){var v,u,p,m,f,h,x=t.svgcontent,c=t.svgroot,d=t.getNextId,y=t.getElem,w=t.addSvgElementFromJson,_=t.selectorManager,g=svgEditor.curConfig,b=!1,k=[],M=".se_connector",S=[],C=$.data,e={en:[{id:"mode_connect",title:"Connect two objects"}],fr:[{id:"mode_connect",title:"Connecter deux objets"}]};function E(t,e,n,r){r&&(r-=0,(n=$.extend({},n)).width+=r,n.height+=r,n.x-=r/2,n.y-=r/2);var o,i=n.x+n.width/2,s=n.y+n.height/2,a=t-i,l=e-s;return{x:i+a*(o=Math.abs(l/a)<n.height/n.width?n.width/2/Math.abs(a):n.height/2/Math.abs(l)),y:s+l*o}}function A(t,e){var n=!!e.getAttribute("marker-"+t),r=5*e.getAttribute("stroke-width");return n?r:0}function r(t){var e=$("#connector_rules");e.length||(e=$('<style id="connector_rules"></style>').appendTo("head")),e.text(t?"#tool_clone, #tool_topath, #tool_angle, #xy_panel { display: none !important; }":""),$("#connector_panel").toggle(t)}function F(e,n,r,o,t){var i,s=e.points,a=c.createSVGPoint();a.x=r,a.y=o,"end"===n&&(n=s.numberOfItems-1);try{s.replaceItem(a,n)}catch(t){var l=e.getAttribute("points").split(" ");for(i=0;i<l.length;i++)i===n&&(l[i]=r+","+o);e.setAttribute("points",l.join(" "))}if(t){var d=s.getItem(0),g=s.getItem(s.numberOfItems-1);F(e,1,(g.x+d.x)/2,(g.y+d.y)/2)}}function I(a){var l;a||(a=S);var t=$(x).find(M);k=[],t.each(function(){var t;function e(){-1!==$.inArray(this,a)&&(t=!0)}var n=C(this,"c_start"),r=C(this,"c_end"),o=[y(n),y(r)];for(l=0;l<2;l++){var i=o[l];if(t=!1,$(i).parents().each(e),i&&i.parentNode){if(-1!==$.inArray(i,a)||t){var s=svgCanvas.getStrokedBBox([i]);k.push({elem:i,connector:this,is_start:0===l,start_x:s.x,start_y:s.y})}}else $(this).remove()}})}function N(t){var e,n;if(I(t),k.length)for(e=k.length;e--;){var r=k[e],o=r.connector,i=r.elem,s=(o.getAttribute("stroke-width"),r.is_start?"start":"end"),a=svgCanvas.getStrokedBBox([i]);a.x=r.start_x,a.y=r.start_y,C(o,s+"_bb",a);C(o,s+"_off");var l=r.is_start?"end":"start",d=C(o,l+"_bb"),g=E(d.x+d.width/2,d.y+d.height/2,a,A(s,o));F(o,r.is_start?0:"end",g.x,g.y,!0);var c=E(g.x,g.y,C(o,l+"_bb"),A(l,o));if(F(o,r.is_start?"end":0,c.x,c.y,!0),-1!==navigator.userAgent.indexOf("AppleWebKit")){var v=o.points,u=v.numberOfItems,p=[];for(n=0;n<u;n++)g=v.getItem(n),p[n]=g.x+","+g.y;o.setAttribute("points",p.join(" "))}}}return function(){var t=svgCanvas.groupSelectedElements;svgCanvas.groupSelectedElements=function(){return svgCanvas.removeFromSelection($(M).toArray()),t.apply(this,arguments)};var e=svgCanvas.moveSelectedElements;svgCanvas.moveSelectedElements=function(){svgCanvas.removeFromSelection($(M).toArray());var t=e.apply(this,arguments);return N(),t},h=svgCanvas.getEditorNS()}(),{name:"Connector",buttons:[{id:"mode_connect",type:"mode",title:"Connect two objects",includeWith:{button:"#tool_line",isDefault:!1,position:1},events:{click:function(){svgCanvas.setMode("connector")}}}],addLangData:function(t){return{data:e[t]}},mouseDown:function(t){var e=t.event;v=t.start_x,u=t.start_y;var n=svgCanvas.getMode();if("connector"==n){if(b)return;var r=e.target,o=$(r).parents();if(-1!==$.inArray(x,o)){var i=$(r).closest("foreignObject");m=i.length?i[0]:r;var s=svgCanvas.getStrokedBBox([m]),a=s.x+s.width/2,l=s.y+s.height/2;b=!0,p=w({element:"polyline",attr:{id:d(),points:a+","+l+" "+a+","+l+" "+v+","+u,stroke:"#"+g.initStroke.color,"stroke-width":m.stroke_width&&0!=m.stroke_width?m.stroke_width:g.initStroke.width,fill:"none",opacity:g.initStroke.opacity,style:"pointer-events:none"}}),C(p,"start_bb",s)}return{started:!0}}"select"==n&&I()},mouseMove:function(t){var e=svgCanvas.getZoom(),n=(t.event,t.mouse_x/e),r=t.mouse_y/e,o=n-v,i=r-u,s=svgCanvas.getMode();if("connector"==s&&b){p.getAttribute("stroke-width");var a=E(n,r,C(p,"start_bb"),A("start",p));v=a.x,u=a.y,F(p,0,a.x,a.y,!0),F(p,"end",n,r,!0)}else if("select"==s){for(var l=S.length;l--;){var d=S[l];d&&C(d,"c_start")&&(svgCanvas.removeFromSelection([d]),svgCanvas.getTransformList(d).clear())}k.length&&function(t,e){for(var n=k.length;n--;){var r=k[n],o=r.connector,i=(r.elem,r.is_start?"start":"end"),s=C(o,i+"_bb");s.x=r.start_x+t,s.y=r.start_y+e,C(o,i+"_bb",s);var a=r.is_start?"end":"start",l=C(o,a+"_bb"),d=E(l.x+l.width/2,l.y+l.height/2,s,A(i,o));F(o,r.is_start?0:"end",d.x,d.y,!0);var g=E(d.x,d.y,C(o,a+"_bb"),A(a,o));F(o,r.is_start?"end":0,g.x,g.y,!0)}}(o,i)}},mouseUp:function(t){var e=svgCanvas.getZoom(),n=t.event,r=(t.mouse_x,t.mouse_y,n.target);if("connector"==svgCanvas.getMode()){var o=$(r).closest("foreignObject");o.length&&(r=o[0]);var i=$(r).parents();if(r==m)return{keep:b=!0,element:null,started:b};if(-1===$.inArray(x,i))return $(p).remove(),{keep:b=!1,element:null,started:b};f=r;var s=m.id,a=f.id,l=s+" "+a,d=a+" "+s;if($(x).find(M).filter(function(){var t=this.getAttributeNS(h,"connector");if(t==l||t==d)return!0}).length)return $(p).remove(),{keep:!1,element:null,started:!1};var g=svgCanvas.getStrokedBBox([f]),c=E(v,u,g,A("start",p));return F(p,"end",c.x,c.y,!0),$(p).data("c_start",s).data("c_end",a).data("end_bb",g),h=svgCanvas.getEditorNS(!0),p.setAttributeNS(h,"se:connector",l),p.setAttribute("class",M.substr(1)),p.setAttribute("opacity",1),svgCanvas.addToSelection([p]),svgCanvas.moveToBottomSelectedElement(),_.requestSelector(p).showGrips(!1),{keep:!(b=!1),element:p,started:b}}},selectedChanged:function(t){if($(x).find(M).length){"connector"==svgCanvas.getMode()&&svgCanvas.setMode("select");for(var e=(S=t.elems).length;e--;){var n=S[e];n&&C(n,"c_start")?(_.requestSelector(n).showGrips(!1),t.selectedElement&&!t.multiselected?r(!0):r(!1)):r(!1)}N()}},elementChanged:function(t){var e,n=t.elems[0];if(n&&"svg"===n.tagName&&"svgcontent"===n.id&&(x=n,$(x).find("*").each(function(){var t=this.getAttributeNS(h,"connector");if(t){this.setAttribute("class",M.substr(1));var e=t.split(" "),n=svgCanvas.getStrokedBBox([y(e[0])]),r=svgCanvas.getStrokedBBox([y(e[1])]);$(this).data("c_start",e[0]).data("c_end",e[1]).data("start_bb",n).data("end_bb",r),svgCanvas.getEditorNS(!0)}})),n&&(n.getAttribute("marker-start")||n.getAttribute("marker-mid")||n.getAttribute("marker-end"))){e=n.getAttribute("marker-start");var r=n.getAttribute("marker-mid"),o=n.getAttribute("marker-end");if(p=n,$(n).data("start_off",!!e).data("end_off",!!o),"line"===n.tagName&&r){var i=Number(n.getAttribute("x1")),s=Number(n.getAttribute("x2")),a=Number(n.getAttribute("y1")),l=Number(n.getAttribute("y2")),d=n.id,g=w({element:"polyline",attr:{points:i+","+a+(" "+(i+s)/2+","+(a+l)/2+" ")+s+","+l,stroke:n.getAttribute("stroke"),"stroke-width":n.getAttribute("stroke-width"),"marker-mid":r,fill:"none",opacity:n.getAttribute("opacity")||1}});$(n).after(g).remove(),svgCanvas.clearSelection(),g.id=d,svgCanvas.addToSelection([g]),n=g}}n.getAttribute("class")==M.substr(1)?N([e=y(C(n,"c_start"))]):N()},toolButtonStateUpdate:function(t){t.nostroke&&$("#mode_connect").hasClass("tool_button_current")&&svgEditor.clickSelect(),$("#mode_connect").toggleClass("disabled",t.nostroke)}}})},window.extEyedropper=function(){window.svgEditor&&svgEditor.addExtension("eyedropper",function(t){"use strict";var i=svgEditor.canvas,s=svgedit.history.ChangeElementCommand,a={fillPaint:"red",fillOpacity:1,strokePaint:"black",strokeOpacity:1,strokeWidth:5,strokeDashArray:null,opacity:1,strokeLinecap:"butt",strokeLinejoin:"miter"};function e(t){if("eyedropper"!=i.getMode()){var e=null,n=$("#tool_eyedropper");!t.multiselected&&t.elems[0]&&-1===$.inArray(t.elems[0].nodeName,["svg","g","use"])?(e=t.elems[0],n.removeClass("disabled"),a.fillPaint=e.getAttribute("fill")||"black",a.fillOpacity=e.getAttribute("fill-opacity")||1,a.strokePaint=e.getAttribute("stroke"),a.strokeOpacity=e.getAttribute("stroke-opacity")||1,a.strokeWidth=e.getAttribute("stroke-width"),a.strokeDashArray=e.getAttribute("stroke-dasharray"),a.strokeLinecap=e.getAttribute("stroke-linecap"),a.strokeLinejoin=e.getAttribute("stroke-linejoin"),a.opacity=e.getAttribute("opacity")||1):n.addClass("disabled")}}return{name:"eyedropper",buttons:[{id:"tool_eyedropper",type:"mode",title:"Eye Dropper Tool",key:"I",events:{click:function(){i.setMode("eyedropper")}}}],selectedChanged:e,elementChanged:e,mouseDown:function(t){var e;if("eyedropper"==i.getMode()){var n=t.event.target;if(-1===$.inArray(n.nodeName,["svg","g","use"])){var r={},o=function(t,e,n){r[e]=t.getAttribute(e),t.setAttribute(e,n)};a.fillPaint&&o(n,"fill",a.fillPaint),a.fillOpacity&&o(n,"fill-opacity",a.fillOpacity),a.strokePaint&&o(n,"stroke",a.strokePaint),a.strokeOpacity&&o(n,"stroke-opacity",a.strokeOpacity),a.strokeWidth&&o(n,"stroke-width",a.strokeWidth),a.strokeDashArray&&o(n,"stroke-dasharray",a.strokeDashArray),a.opacity&&o(n,"opacity",a.opacity),a.strokeLinecap&&o(n,"stroke-linecap",a.strokeLinecap),a.strokeLinejoin&&o(n,"stroke-linejoin",a.strokeLinejoin),e=new s(n,r),i.undoMgr.addCommandToHistory(e)}}}}})},window.extGrid=function(){window.svgEditor&&svgEditor.addExtension("view_grid",function(){"use strict";var t=svgedit.NS,e=document.getElementById("svgcanvas").ownerDocument,n=svgEditor.curConfig.showGrid||!1,r=svgCanvas.assignAttributes,c=document.createElement("canvas"),o=$("#canvasBackground"),v=svgedit.units.getTypeMap(),u=[.01,.1,1,10,100,1e3];$(c).hide().appendTo("body");var i=e.createElementNS(t.SVG,"svg");r(i,{id:"canvasGrid",width:"100%",height:"100%",x:0,y:0,overflow:"visible",display:"none"}),o.append(i);var s=e.createElementNS(t.SVG,"pattern");r(s,{id:"gridpattern",patternUnits:"userSpaceOnUse",x:0,y:0,width:100,height:100});var p=e.createElementNS(t.SVG,"image");r(p,{x:0,y:0,width:100,height:100}),s.appendChild(p),$("#svgroot defs").append(s);var a=e.createElementNS(t.SVG,"rect");function l(t){var e,n=v[svgEditor.curConfig.baseUnit]*t,r=100/n,o=1;for(e=0;e<u.length;e++){var i=u[e];if(r<=(o=i))break}var s=o*n;c.width=s,c.height=s;var a=c.getContext("2d"),l=s/10;for(a.globalAlpha=.2,a.strokeStyle=svgEditor.curConfig.gridColor,e=1;e<10;e++){var d=Math.round(l*e)+.5;a.moveTo(d,s),a.lineTo(d,0),a.moveTo(s,d),a.lineTo(0,d)}a.stroke(),a.beginPath(),a.globalAlpha=.5,a.moveTo(.5,s),a.lineTo(.5,0),a.moveTo(s,.5),a.lineTo(0,.5),a.stroke();var g=c.toDataURL("image/png");p.setAttribute("width",s),p.setAttribute("height",s),p.parentNode.setAttribute("width",s),p.parentNode.setAttribute("height",s),svgCanvas.setHref(p,g)}function d(){n&&l(svgCanvas.getZoom()),$("#canvasGrid").toggle(n),$("#view_grid").addClass("button_hide")}return r(a,{width:"100%",height:"100%",x:0,y:0,"stroke-width":0,stroke:"none",fill:"url(#gridpattern)",style:"pointer-events: none; display:visible;"}),$("#canvasGrid").append(a),{name:"view_grid",zoomChanged:function(t){n&&l(t)},callback:function(){n&&d()},buttons:[{id:"view_grid",type:"context",panel:"editor_panel",title:"Show/Hide Grid",events:{click:function(){svgEditor.curConfig.showGrid=n=!n,d()}}}]}})},window.extOverview=function(){if(window.svgEditor){var e={};svgEditor.addExtension("overview_window",function(){"use strict";$("#sidepanels").append('\t\t<div id="overview_window_content_pane" style=" width:100%; word-wrap:break-word;  display:inline-block; margin-top:20px;">\t\t\t<div id="overview_window_content" style="position:relative; left:12px; top:0px;">\t\t\t\t<div style="background-color:#A0A0A0; display:inline-block; overflow:visible;">\t\t\t\t\t<svg id="overviewMiniView" width="150" height="100" x="0" y="0" viewBox="0 0 4800 3600" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\t\t\t\t\t\t<use x="0" y="0" xlink:href="#svgroot"> </use>\t\t\t\t\t </svg>\t\t\t\t\t <div id="overview_window_view_box" style="min-width:50px; min-height:50px; position:absolute; top:30px; left:30px; z-index:5; background-color:rgba(255,0,102,0.3);">\t\t\t\t\t </div>\t\t\t\t </div>\t\t\t</div>\t\t</div>');var i=function(){var t=parseFloat($("#workarea").css("height")),e=parseFloat($("#workarea").css("width")),n=$("#workarea").scrollLeft(),r=$("#workarea").scrollTop(),o=parseFloat($("#svgcanvas").css("width")),i=parseFloat($("#svgcanvas").css("height")),s=$("#overviewMiniView").attr("width"),a=$("#overviewMiniView").attr("height"),l=n/o*s,d=r/i*a,g=e/o*s,c=t/i*a;$("#overview_window_view_box").css("min-width",g+"px"),$("#overview_window_view_box").css("min-height",c+"px"),$("#overview_window_view_box").css("top",d+"px"),$("#overview_window_view_box").css("left",l+"px")};$("#workarea").scroll(function(){e.viewBoxDragging||i()}),$("#workarea").resize(i),i();var t=function(){var t=$("#svgroot").attr("width"),e=$("#svgroot").attr("height"),n=640,r=480;svgedit.browser.isIE()&&(r=n=0);var o=e/t*$("#overviewMiniView").attr("width");$("#overviewMiniView").attr("viewBox",n+" "+r+" "+t+" "+e),$("#overviewMiniView").attr("height",o),i()};t(),e.viewBoxDragging=!1;var d=function(){var t=parseFloat($("#svgcanvas").css("width")),e=parseFloat($("#svgcanvas").css("height")),n=$("#overviewMiniView").attr("width"),r=$("#overviewMiniView").attr("height"),o=parseFloat($("#overview_window_view_box").css("left"))/n*t,i=parseFloat($("#overview_window_view_box").css("top"))/r*e;$("#workarea").scrollLeft(o),$("#workarea").scrollTop(i)};return $("#overview_window_view_box").draggable({containment:"parent",drag:d,start:function(){e.viewBoxDragging=!0},stop:function(){e.viewBoxDragging=!1}}),$("#overviewMiniView").click(function(t){var e=t.offsetX||t.originalEvent.layerX,n=t.offsetY||t.originalEvent.layerY,r=$("#overviewMiniView").attr("width"),o=$("#overviewMiniView").attr("height"),i=parseFloat($("#overview_window_view_box").css("min-width")),s=parseFloat($("#overview_window_view_box").css("min-height")),a=e-.5*i,l=n-.5*s;a<0&&(a=0),l<0&&(l=0),r<a+i&&(a=r-i),o<l+s&&(l=o-s),$("#overview_window_view_box").css("top",l+"px"),$("#overview_window_view_box").css("left",a+"px"),d()}),{name:"overview window",canvasUpdated:t,workareaResized:i}})}},window.extPanning=function(){window.svgEditor&&svgEditor.addExtension("ext-panning",function(){"use strict";return{name:"Extension Panning",buttons:[{id:"ext-panning",type:"mode",title:"Panning",events:{click:function(){svgCanvas.setMode("ext-panning")}}}],mouseDown:function(){if("ext-panning"==svgCanvas.getMode())return svgEditor.setPanning(!0),{started:!0}},mouseUp:function(){if("ext-panning"==svgCanvas.getMode())return svgEditor.setPanning(!1),{keep:!1,element:null}}}})},window.extStorage=function(){window.svgEditor&&svgEditor.addExtension("storage",function(){var l=svgEditor.curConfig.emptyStorageOnDecline,d=svgEditor.curConfig.noStorageOnLoad,g=svgEditor.curConfig.forceStorage,c=svgEditor.storage;function v(r){r=r?"storagePrompt="+r:"";var t=top.location;-1<t.href.indexOf("storagePrompt=")?t.href=t.href.replace(/([&?])storagePrompt=[^&]*(&?)/,function(t,e,n){return(r?e:"")+r+(!r&&n?e:n||"")}):t.href+=(-1<t.href.indexOf("?")?"&":"?")+r}function u(t){if(c){var e="svgedit-"+svgEditor.curConfig.canvasName;t?c.setItem(e,t):c.removeItem(e)}}function p(t){document.cookie=encodeURIComponent(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"}function m(){window.addEventListener("beforeunload",function(t){if(document.cookie.match(/(?:^|;\s*)store=(?:prefsAndContent|prefsOnly)/)){var e;document.cookie.match(/(?:^|;\s*)store=prefsAndContent/)&&u(svgCanvas.getSvgString()),svgEditor.setConfig({no_save_warning:!0});var n=svgEditor.curPrefs;for(e in n)if(n.hasOwnProperty(e)){var r=n[e];if(e="web-edit-"+e,!(null!=r))continue;c?c.setItem(e,r):window.widget?widget.setPreferenceForKey(r,e):(r=encodeURIComponent(r),document.cookie=encodeURIComponent(e)+"="+r+"; expires=Fri, 31 Dec 9999 23:59:59 GMT")}}},!1)}var f=!1;return{name:"storage",langReady:function(t){var e=t.uiStrings,n=$.deparam.querystring(!0).storagePrompt;if(!f)if(f=!0,g||!0!==n&&(!1===n||document.cookie.match(/(?:^|;\s*)store=(?:prefsAndContent|prefsOnly)/)))d&&!g||m();else{var r=[];c?r.unshift({value:"prefsAndContent",text:e.confirmSetStorage.storagePrefsAndContent},{value:"prefsOnly",text:e.confirmSetStorage.storagePrefsOnly},{value:"noPrefsOrContent",text:e.confirmSetStorage.storageNoPrefsOrContent}):r.unshift({value:"prefsOnly",text:e.confirmSetStorage.storagePrefs},{value:"noPrefsOrContent",text:e.confirmSetStorage.storageNoPrefs});var o=$("#dialog_container")[0].style.width,i=$("#dialog_container")[0].style.marginLeft,s=$("#dialog_content")[0].style.height,a=$("#dialog_container")[0].style.height;$("#dialog_content")[0].style.height="120px",$("#dialog_container")[0].style.height="170px",$("#dialog_container")[0].style.width="800px",$("#dialog_container")[0].style.marginLeft="-400px",$.select(e.confirmSetStorage.message,r,function(t,e){if(t&&"noPrefsOrContent"!==t){if(document.cookie="store="+encodeURIComponent(t)+"; expires=Fri, 31 Dec 9999 23:59:59 GMT",!0===n&&e)return void v()}else if(p("store"),t&&l&&function(){var t;for(t in u(""),svgEditor.curPrefs)svgEditor.curPrefs.hasOwnProperty(t)&&(t="web-edit-"+t,c&&c.removeItem(t),p(t))}(),t&&e)return void v("false");$("#dialog_container")[0].style.width=o,$("#dialog_container")[0].style.marginLeft=i,$("#dialog_content")[0].style.height=s,$("#dialog_container")[0].style.height=a,m(),svgEditor.storagePromptClosed=!0},null,null,{label:e.confirmSetStorage.rememberLabel,checked:!1,tooltip:e.confirmSetStorage.rememberTooltip})}}}})},window.extSwitch=function(){svgEditor.addExtension("switch",function(k){"use strict";var g,M,S,C,E=svgEditor.canvas,A=E.getRootElem(),F={},I="switch",c="svg-ext-"+I,v="SWI_",u={};return{callback:function(){$("#switch_panel").hide()},mouseDown:function(t){var e=E.getColor("fill"),n=E.getColor("stroke"),r=E.getStrokeWidth();if(E.getMode()===I){for(var o=S=t.start_x,i=C=t.start_y,s={fill:e,stroke:n,"font-size":E.getFontSize(),stroke:n,"stroke-width":r,"font-family":E.getFontFamily(),"text-anchor":"middle","xml:space":"preserve"},a={elements:[{type:"path",attr:{id:"X-"+E.getNextId().replace("svg_",v),d:"m2.9674 294.65-1.9091-2.9389"}},{type:"path",attr:{id:E.getNextId().replace("svg_",v),d:"m2.9959 290.12v1.0583"}},{type:"circle",attr:{id:E.getNextId().replace("svg_",v),cx:"2.9891",cy:"291.41",r:".2581"}},{type:"path",attr:{id:E.getNextId().replace("svg_",v),d:"m2.9959 295.94v-1.0583"}},{type:"circle",attr:{id:E.getNextId().replace("svg_",v),cx:"2.9891",cy:"-294.66",r:".2581",transform:"scale(1,-1)"}}]},l={type:c,x:o,y:i,style:"pointer-events:none"},d=0;d<a.elements.length;d++)$.extend(a.elements[d].attr,s);return $.extend(l,s),u.x=o,u.y=i,g=E.getNextId().replace("svg_",v),(M=k.addSvgGroupFromJson({group:"g",id:g,type:c,attr:l,elements:a.elements})).setAttribute("transform","translate("+o+","+i+") scale(0.005) translate("+-o+","+-i+")"),k.recalculateDimensions(M),F=M.getBBox(),{started:!0}}},mouseMove:function(t){if(E.getMode()===I){var e=E.getZoom(),n=t.event,r=t.mouse_x/e,o=t.mouse_y/e,i=E.getTransformList(M),s=M.getBBox(),a=s.x,l=s.y,d=s.width,g=s.height,c=r-S,v=o-C,u=(Math.min(S,r),Math.min(C,o),Math.abs(r-S)),p=Math.abs(o-C),m=0,f=0,h=g?(g+v)/g:1,x=d?(d+c)/d:1;x=u/F.width||1,h=p/F.height||1,r<S&&(m=F.width),o<C&&(f=F.height);var y=A.createSVGTransform(),w=A.createSVGTransform(),_=A.createSVGTransform();if(y.setTranslate(-(a+m),-(l+f)),!n.shiftKey){var b=Math.min(Math.abs(x),Math.abs(h));x=b*(x<0?-1:1),h=b*(h<0?-1:1)}w.setScale(x,h),_.setTranslate(a+m,l+f),i.appendItem(_),i.appendItem(w),i.appendItem(y),k.recalculateDimensions(M),F=M.getBBox()}},mouseUp:function(t){if(E.getMode()===I)return{keep:t.event.clientX!=u.x&&t.event.clientY!=u.y,element:M,started:!1}},getClassId:function(){return c}}})},window.extValue=function(){svgEditor.addExtension("value",function(d){"use strict";var g,c,v=svgEditor.canvas,u="value",p="svg-ext-"+u,m="VAL_",f={};return{callback:function(){$("#value_panel").hide()},mouseDown:function(t){if(v.getMode()===u){var e=v.getColor("fill"),n=v.getColor("stroke");e!==n&&(e=n);for(var r=t.start_x,o=t.start_y,i={fill:e,stroke:n,"font-size":v.getFontSize(),stroke:n,"stroke-width":0,"font-family":v.getFontFamily(),"text-anchor":"middle","xml:space":"preserve",x:r,y:o},s={elements:[{type:"text",content:"##.##",attr:{id:v.getNextId().replace("svg_",m)}}]},a={type:p,x:r,y:o,style:"pointer-events:none"},l=0;l<s.elements.length;l++)$.extend(s.elements[l].attr,i);return $.extend(a,i),f.x=r,f.y=o,g=v.getNextId().replace("svg_",m),c=d.addSvgGroupFromJson({group:"g",id:g,type:p,attr:a,elements:s.elements}),{started:!0}}},mouseMove:function(t){},mouseUp:function(t){if(v.getMode()===u)return{keep:t.event.clientX!=f.x&&t.event.clientY!=f.y,element:c,started:!1}},getClassId:function(){return p},setGaugeAttribute:function(t){console.log("value attr: "+t),0===t.elem.id.indexOf(m)&&t.elem.children&&t.elem.children.length&&t.elem.children[0].setAttribute(t.attr,t.value)}}})},window.extShapes=function(){window.svgEditor&&svgEditor.addExtension("shapes",function(){"use strict";var d,g,k,M,S,C=svgEditor.canvas,E=C.getRootElem(),A={},c={diamond:"m1,150l149,-149l149,149l-149,149l-149,-149z",triangle:"M 0.34322034,0.59540563 60.34322,40.595405 0.34322034,80.595402 Z",halfcircle:"m1.3621 7.8324c0 6.7512 4.824 12.226 10.773 12.226 5.9487 0 10.773-5.4748 10.773-12.226z",delay:"m1.3621 7.0188h16.353q5.4511 0 5.4511 5.6395 0 5.6395-5.4511 5.6395h-16.353z",looplimit:"m1.1234 6.4492h21.925v8.3845l-5.4812 5.24h-10.962l-5.4812-5.24z",prepara:"m6.5066 5.414h10.992l5.496 6.4146-5.496 6.4146h-10.992l-5.496-6.4146z",trape:"m1.4358 17.248 4.2257-11.309h12.677l4.2257 11.309z",offpage:"m1.1032 6.3486v3.3754l10.999 10.126 10.999-10.126v-3.3754z",ticket:"m1.0632 18.162v-12.427h14.789l6.7205 6.2133-6.7205 6.2133z",arrow:"m0.92906 12.502v-3.0016h16.594v-3.1517l5.2549 4.6525-5.2549 4.6525v-3.1517z",doublearrow:"m5.8876 12.193v2.8614l-4.5862-4.224 4.5862-4.224v2.8614h12.31v-2.8614l4.5862 4.224-4.5862 4.224v-2.8614z",rectindi:"m11.677 22.941-.044742-11.249m-5.1325-10.227h10.227v10.227h-10.227z",circleindi:"m17.305 6.8836a5.7579 5.7579 0 0 1 -5.7579 5.7579 5.7579 5.7579 0 0 1 -5.7579 -5.7579 5.7579 5.7579 0 0 1 5.7579 -5.7579 5.7579 5.7579 0 0 1 5.7579 5.7579zm-5.628 16.197-.04486-10.331"},F="shape",v={};return{callback:function(){$("#shape_panel").hide()},mouseDown:function(t){var e=C.getMode();if(e.substr(0,F.length)===F){var n=C.getColor("fill"),r=C.getColor("stroke"),o=C.getStrokeWidth(),i=C.getStyle(),s=M=t.start_x,a=S=t.start_y;g=e.substr((F+"-").length);var l={d:d=c[g],id:C.getNextId().replace("svg_","SHP_"),fill:n,"font-size":C.getFontSize(),stroke:r,"stroke-width":o,"font-family":C.getFontFamily(),"xml:space":"preserve",opacity:i.opacity/2,style:"pointer-events:none"};v.x=t.event.clientX,v.y=t.event.clientY,k=C.addSvgElementFromJson({element:"path",curStyles:!0,attr:l}),/[a-z]/.test(d)&&(d=c[g]=C.pathActions.convertPath(k),k.setAttribute("d",d),C.pathActions.fixEnd(k)),k.setAttribute("transform","translate("+s+","+a+") scale(0.005) translate("+-s+","+-a+")"),k.removeAttribute("opacity"),C.recalculateDimensions(k);C.getTransformList(k);return A=k.getBBox(),{started:!0}}},mouseMove:function(t){if(C.getMode().substr(0,F.length)===F){var e=C.getZoom(),n=t.event,r=t.mouse_x/e,o=t.mouse_y/e;svgEditor.curConfig.gridSnapping&&(r=svgedit.utilities.snapToGrid(r),o=svgedit.utilities.snapToGrid(o));var i=C.getTransformList(k),s=k.getBBox(),a=s.x,l=s.y,d=s.width,g=s.height,c=r-M,v=o-S,u=(Math.min(M,r),Math.min(S,o),Math.abs(r-M)),p=Math.abs(o-S),m=0,f=0,h=g?(g+v)/g:1,x=d?(d+c)/d:1;x=u/A.width||1,h=p/A.height||1,r<M&&(m=A.width),o<S&&(f=A.height);var y=E.createSVGTransform(),w=E.createSVGTransform(),_=E.createSVGTransform();if(y.setTranslate(-(a+m),-(l+f)),!n.shiftKey){var b=Math.min(Math.abs(x),Math.abs(h));x=b*(x<0?-1:1),h=b*(h<0?-1:1)}w.setScale(x,h),_.setTranslate(a+m,l+f),i.appendItem(_),i.appendItem(w),i.appendItem(y),C.recalculateDimensions(k),A=k.getBBox()}},mouseUp:function(t){if(C.getMode().substr(0,F.length)===F)return{keep:t.event.clientX!=v.x&&t.event.clientY!=v.y,element:k,started:!1}}}})},window.extValves=function(){svgEditor.addExtension("valves",function(p){"use strict";var m,f,h=svgEditor.canvas,x="valve",y="svg-ext-"+x,w={},_={ax:[{id:"l",d:"m0 0 15 9-15 9z"},{id:"r",d:"m16 0 15 9-15 9z",transform:"rotate(180,23.5,9)"}],bx:[{id:"l",d:"m8 8 15 9-15 9z",transform:"rotate(-90,15.5,17)"},{id:"r",d:"m16 0 15 9-15 9z",transform:"rotate(180,23.5,9)"}],cx:[{id:"l",d:"m0 0 15 9-15 9z"},{id:"l",d:"m8 8 15 9-15 9z",transform:"rotate(-90,15.5,17)"},{id:"r",d:"m16 0 15 9-15 9z",transform:"rotate(180,23.5,9)"}]};return{callback:function(){$("#valve_panel").hide()},mouseDown:function(t){var e=h.getMode();if(e.substr(0,x.length)===x){var n=h.getColor("fill"),r=h.getColor("stroke"),o=h.getStrokeWidth();h.getStyle();n===r&&(n="#FFFFFF",r="#000000");var i=e.substr((x+"-").length);_[i];for(var s=t.start_x,a=t.start_y-25,l={"font-size":h.getFontSize(),"font-family":h.getFontFamily(),"text-anchor":"middle","xml:space":"preserve"},d={elements:[]},g=0;g<_[i].length;g++){var c=_[i][g],v={id:"t"+c.id+h.getNextId().replace("svg_","VLA_"),d:c.d,"stroke-width":o};c.transform&&(v.transform=c.transform),d.elements.push({type:"path",attr:v})}var u={type:y,x:s,y:a,style:"pointer-events:none",fill:n,stroke:r};for(g=0;g<d.elements.length;g++)$.extend(d.elements[g].attr,l);return $.extend(u,l),w.x=s,w.y=a,m=h.getNextId().replace("svg_","VLA_"),(f=p.addSvgGroupFromJson({group:"g",id:m,type:y,attr:u,elements:d.elements})).setAttribute("transform","translate("+s+","+a+")"),h.recalculateDimensions(f),{started:!0}}},mouseMove:function(t){},mouseUp:function(t){if(h.getMode().substr(0,x.length)===x)return{keep:t.event.clientX!=w.x&&t.event.clientY!=w.y,element:f,started:!1}},getClassId:function(){return y}}})},window.extMotors=function(){svgEditor.addExtension("motors",function(p){"use strict";var m,f,h=svgEditor.canvas,x="motor",y="svg-ext-"+x,w={},_={simb:[{id:"c",type:"ellipse",attr:{cx:"20",cy:"20",rx:"20.5",ry:"20.5"}},{id:"s",type:"path",attr:{d:"M 20,1 40,20.25 20,39.5 Z",fill:"#000000"}}]};return{callback:function(){$("#motor_panel").hide()},mouseDown:function(t){var e=h.getMode();if(e.substr(0,x.length)===x){var n=h.getColor("fill"),r=h.getColor("stroke"),o=h.getStrokeWidth();h.getStyle();n===r&&(n="#FFFFFF",r="#000000");var i=e.substr((x+"-").length);_[i];for(var s=t.start_x,a=t.start_y-35,l={fill:n,stroke:r,"font-size":h.getFontSize(),"font-family":h.getFontFamily(),"text-anchor":"middle","xml:space":"preserve"},d={elements:[]},g=0;g<_[i].length;g++){var c=_[i][g],v={id:c.id+h.getNextId().replace("svg_","MTR_"),"stroke-width":o};$.extend(v,c.attr),d.elements.push({type:c.type,attr:v})}var u={type:y,x:s,y:a,style:"pointer-events:none"};return $.extend(u,l),w.x=s,w.y=a,m=h.getNextId().replace("svg_","MTR_"),(f=p.addSvgGroupFromJson({group:"g",id:m,type:y,attr:u,elements:d.elements})).setAttribute("transform","translate("+s+","+a+")"),h.recalculateDimensions(f),{started:!0}}},mouseMove:function(t){},mouseUp:function(t){if(h.getMode().substr(0,x.length)===x)return{keep:t.event.clientX!=w.x&&t.event.clientY!=w.y,element:f,started:!1}},getClassId:function(){return y}}})},window.extHtmlInput=function(){window.svgEditor&&svgEditor.addExtension("html_input",function(l){"use strict";var d;console.log("add HTML-input");var g,c=svgEditor.canvas,v=80,u=24,p="html_input",m="svg-ext-"+p,e={};return{callback:function(){$("#html_input_panel").hide()},mouseDown:function(t){if(c.getMode()===p){!0;var e=c.getColor("fill"),n=c.getColor("stroke"),r=t.start_x,o=t.start_y,i=c.getNextId(),s=c.getNextId().replace("svg_","HXI_"),a={elements:[{type:"rect",attr:{x:r,y:o-u,width:v,height:u,"stroke-width":0,id:i}},{type:"foreignObject",content:[{tag:"input",attr:{id:"I-"+s,type:"text",value:""},style:"width:calc(100% - 7px);height:calc(100% - 7px);text-align: right;border: unset;"}],attr:{x:r,y:o-u,height:u,width:v,id:"H-"+s}}]};return d=l.getNextId().replace("svg_","HXI_"),g=l.addSvgGroupFromJson({group:"g",id:d,type:m,attr:{type:m,style:"pointer-events:none",fill:e,stroke:n,"stroke-width":1,"font-size":c.getFontSize(),"font-family":c.getFontFamily(),"text-anchor":"right","xml:space":"preserve"},elements:a.elements}),{started:!0}}},mouseMove:function(t){},mouseUp:function(t){if(c.getMode()===p)return{keep:t.event.clientX!=e.x&&t.event.clientY!=e.y,element:g,started:!1}},getClassId:function(){return m}}})},window.extHtmlButton=function(){window.svgEditor&&svgEditor.addExtension("html_button",function(l){"use strict";var d;console.log("add HTML-button");var g,c=svgEditor.canvas,v=80,u=24,p="html_button",m="svg-ext-"+p,e={};return{callback:function(){$("#html_button_panel").hide()},mouseDown:function(t){if(c.getMode()===p){!0;var e=c.getColor("fill"),n=c.getColor("stroke"),r=t.start_x,o=t.start_y,i=c.getNextId(),s=c.getNextId().replace("svg_","HXB_"),a={elements:[{type:"rect",attr:{x:r,y:o-u,width:v,height:u,fill:e,stroke:n,"stroke-width":0,id:i}},{type:"foreignObject",content:[{tag:"button",attr:{id:"B-"+s,class:"md-btn  md-btn-raised"},style:"width:100%;height:100%;"}],attr:{x:r,y:o-u,height:u,width:v,id:"H-"+s}}]};return d=c.getNextId().replace("svg_","HXB_"),g=l.addSvgGroupFromJson({group:"g",id:d,type:m,attr:{type:m,style:"pointer-events:none",fill:e,stroke:n,"stroke-width":1,"font-size":c.getFontSize(),"font-family":c.getFontFamily(),"text-anchor":"right","xml:space":"preserve"},elements:a.elements}),{started:!0}}},mouseMove:function(t){},mouseUp:function(t){if(c.getMode()===p)return{keep:t.event.clientX!=e.x&&t.event.clientY!=e.y,element:g,started:!1}},getClassId:function(){return m}}})},window.extHtmlSelect=function(){window.svgEditor&&svgEditor.addExtension("html_select",function(l){"use strict";var d;console.log("add HTML-select");var g,c=svgEditor.canvas,v=80,u=26,p="html_select",m="svg-ext-"+p,e={};return{callback:function(){$("#html_select_panel").hide()},mouseDown:function(t){if(c.getMode()===p){!0;var e=c.getColor("fill"),n=c.getColor("stroke"),r=t.start_x,o=t.start_y,i=c.getNextId(),s=c.getNextId().replace("svg_","HXS_"),a={elements:[{type:"rect",attr:{x:r,y:o-u,width:v,height:u,fill:e,stroke:n,"stroke-width":0,id:i}},{type:"foreignObject",content:[{tag:"select",attr:{id:"S-"+s},style:"width:100%;height:100%;text-align: right;margin-top:unset;"}],attr:{x:r,y:o-u,height:u,width:v,id:"H-"+s}}]};return d=l.getNextId().replace("svg_","HXS_"),g=l.addSvgGroupFromJson({group:"g",id:d,type:m,attr:{type:m,style:"pointer-events:none",fill:e,stroke:n,"stroke-width":1,"font-size":c.getFontSize(),"font-family":c.getFontFamily(),"text-anchor":"right","xml:space":"preserve"},elements:a.elements}),{started:!0}}},mouseMove:function(t){},mouseUp:function(t){if(c.getMode()===p)return{keep:t.event.clientX!=e.x&&t.event.clientY!=e.y,element:g,started:!1}},getClassId:function(){return m}}})},window.extGaugeProgress=function(){window.svgEditor&&svgEditor.addExtension("gauge_progress",function(u){"use strict";var p;console.log("add Gauge-progress");var m,f=svgEditor.canvas,h=100,x=25,y="gauge_progress",w="svg-ext-"+y,_="GXP_",b={};return{callback:function(){$("#gauge_progress_panel").hide()},mouseDown:function(t){if(f.getMode()===y){for(var e=f.getColor("fill"),n=f.getColor("stroke"),r=f.getStrokeWidth(),o=f.getFontSize(),i=t.start_x,s=t.start_y-h,a={"font-size":o,stroke:n,"stroke-width":r,"font-family":f.getFontFamily(),"xml:space":"preserve"},l=f.getNextId().replace("svg_",_),d=[{tag:"span",attr:{id:"M-"+l},style:"position:absolute;top:calc(0px - "+o/2+"px);right:calc(100% + 5px)",value:"100"},{tag:"span",attr:{id:"m-"+l},style:"position:absolute;bottom:calc(0px - "+o/2+"px);right:calc(100% + 5px)",value:"0"},{tag:"span",attr:{id:"V-"+l},style:"position:absolute;top:calc(50% - "+o/2+"px);left:calc(100% + 5px)",value:"50"}],g={elements:[{type:"rect",attr:{id:"A-"+f.getNextId().replace("svg_",_),x:i,y:s,width:x,height:h,fill:e}},{type:"rect",attr:{id:"B-"+f.getNextId().replace("svg_",_),x:i,y:s+h/2,width:x,height:h/2,fill:"#1565c0"}},{type:"foreignObject",content:d,attr:{x:i,y:s,height:h,width:x,id:"H-"+l}}]},c={type:w,x:i,y:s,style:"pointer-events:none"},v=0;v<g.elements.length;v++)$.extend(g.elements[v].attr,a);return $.extend(c,a),b.x=i,b.y=s,p=f.getNextId().replace("svg_",_),m=u.addSvgGroupFromJson({group:"g",id:p,type:w,attr:c,elements:g.elements}),{started:!0}}},mouseMove:function(t){f.getMode()},mouseUp:function(t){if(f.getMode()===y)return console.log("progress up2"),{keep:t.event.clientX!=b.x&&t.event.clientY!=b.y,element:m,started:!1}},getClassId:function(){return w}}})},window.extGaugeSemaphore=function(){svgEditor.addExtension("gauge_semaphore",function(g){"use strict";var c,v,u=svgEditor.canvas,p="gauge_semaphore",m="svg-ext-"+p,f={};return{callback:function(){$("#gauge_semaphore_panel").hide()},mouseDown:function(t){if(u.getMode()===p){for(var e=u.getColor("fill"),n=u.getColor("stroke"),r=u.getStrokeWidth(),o=t.start_x,i=t.start_y-30,s={fill:e,"font-size":u.getFontSize(),stroke:n,"stroke-width":r,"font-family":u.getFontFamily(),"xml:space":"preserve"},a={elements:[{type:"ellipse",attr:{id:u.getNextId().replace("svg_","GSE_"),cx:"15",cy:"15",rx:"14",ry:"14","stroke-width":"none"}}]},l={type:m,x:o,y:i,style:"pointer-events:none"},d=0;d<a.elements.length;d++)$.extend(a.elements[d].attr,s);return $.extend(l,s),f.x=o,f.y=i,c=u.getNextId().replace("svg_","GSE_"),(v=g.addSvgGroupFromJson({group:"g",id:c,type:m,attr:l,elements:a.elements})).setAttribute("transform","translate("+o+","+i+")"),g.recalculateDimensions(v),v.getBBox(),{started:!0}}},mouseMove:function(t){},mouseUp:function(t){if(u.getMode()===p)return{keep:t.event.clientX!=f.x&&t.event.clientY!=f.y,element:v,started:!1}},getClassId:function(){return m}}})},window.extExchangers=function(){svgEditor.addExtension("exchangers",function(p){"use strict";var m,f,h=svgEditor.canvas,x="exchanger",y="svg-ext-"+x,w={},_={filter:[{id:"f",type:"path",attr:{d:"M 0,0 70,70 M 14,0 70,56 M 28,0 70,42 M 42,0 70,28 M 56,0 70,14 M 0,14 56,70 M 0,28 42,70 M 0,42 28,70 M 0,56 14,70 M 0,14 14,0 M 0,28 28,0 M 0,42 42,0 M 0,56 56,0 M 0,70 70,0 M 70,14 14,70 M 28,70 70,28 M 70,42 42,70 M 56,70 70,56 M 0,0 H 70 V 70 H 0 Z"}}],heat:[{id:"h",type:"path",attr:{d:"M 70,0 0,40 M 0,0 H 70 V 40 H 0 Z"}}],tube:[{id:"t",type:"path",attr:{d:"M 7.04,0 V 40 M 80.96,0 V 40 M 7.04,5 H 80.96 M 7.04,10 H 80.96 M 7.04,15 H 80.96 M 7.04,20 H 80.96 M 7.04,25 H 80.96 M 7.04,30 H 80.96 M 7.04,35 H 80.96 M 0,0 H 88 V 40 H 0 Z"}}]};return{callback:function(){$("#exchanger_panel").hide()},mouseDown:function(t){var e=h.getMode();if(e.substr(0,x.length)===x){var n=h.getColor("fill"),r=h.getColor("stroke"),o=h.getStrokeWidth();h.getStyle();n===r&&(n="#FFF");for(var i=e.substr((x+"-").length),s=t.start_x,a=t.start_y-35,l={fill:n,"font-size":h.getFontSize(),stroke:r,"font-family":h.getFontFamily(),"text-anchor":"middle","xml:space":"preserve"},d={elements:[]},g=0;g<_[i].length;g++){var c=_[i][g],v={id:c.id+h.getNextId().replace("svg_","EHS_"),"stroke-width":o};$.extend(v,c.attr),d.elements.push({type:c.type,attr:v})}var u={type:y,x:s,y:a,style:"pointer-events:none"};return $.extend(u,l),w.x=s,w.y=a,m=h.getNextId().replace("svg_","EHS_"),(f=p.addSvgGroupFromJson({group:"g",id:m,type:y,attr:u,elements:d.elements})).setAttribute("transform","translate("+s+","+a+")"),h.recalculateDimensions(f),{started:!0}}},mouseMove:function(t){},mouseUp:function(t){if(h.getMode().substr(0,x.length)===x)return{keep:t.event.clientX!=w.x&&t.event.clientY!=w.y,element:f,started:!1}},getClassId:function(){return y}}})};